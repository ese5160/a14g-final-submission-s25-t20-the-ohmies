<!-- srs.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Software Requirements · The Ohmies</title>
  <style>
    /* Updated styles with lilac background */
    :root {
      --bg: #e6e6fa; 
      --accent: rgba(100, 80, 120, 0.1);
      --neon: #8a2be2; 
      --text: #2a2a40;
      --radius:12px; 
      --shadow:rgba(100, 80, 160, 0.2);
    }
    *{box-sizing:border-box;margin:0;padding:0;}
    html, body {
      margin: 0;
      padding: 0;
      font-family:'Segoe UI',Arial,sans-serif;
      color:var(--text);
      background-color:#e6e6fa !important;
      background-image: linear-gradient(to bottom right, #e6e6fa, #d8bfd8) !important;
      display:flex;flex-direction:column;
      min-height:100vh;
    }
    nav{
      backdrop-filter:blur(10px);
      background:rgba(255, 255, 255, 0.8);
      display:flex;
      justify-content:flex-start;
      align-items:center;
      padding:1em;
      position:sticky;
      top:0;
      border-bottom:1px solid rgba(138, 43, 226, 0.2);
      box-shadow: 0 2px 8px rgba(100, 80, 160, 0.1);
      z-index:10;
    }
    nav a{
      margin:0 1em;
      color:var(--text);
      text-decoration:none;
      font-weight:600;
      position:relative;
      transition:color .3s, transform .2s;
    }
    nav a:hover{
      color:var(--neon);
      transform: translateY(-2px);
    } 
    nav a::after{
      content:'';
      position:absolute;
      left:0;bottom:-4px;
      width:0;height:2px;
      background:var(--neon);
      transition:width .3s;
    }
    nav a:hover::after{width:100%;}
    .logo{width:150px;height:auto;margin-right:1em;}
    .hero{
      text-align:center;
      padding:2.5em 1em;
      background:radial-gradient(circle at top, rgba(138, 43, 226, 0.1),transparent);
    }
    .hero h1{
      font-size:2.4em;
      background:linear-gradient(90deg,#8a2be2,#9370db);
      background-clip:text;
      -webkit-text-fill-color:transparent;
      animation:neonGlow 2s ease-in-out infinite both;
    }
    .hero p{
      margin-top:.3em;
      color: #483d8b;
    } 
    @keyframes neonGlow{
      0%,100%{text-shadow:0 0 4px rgba(138, 43, 226, 0.7), 0 0 10px rgba(138, 43, 226, 0.5);}
      50%{text-shadow:0 0 10px rgba(138, 43, 226, 0.7), 0 0 20px rgba(138, 43, 226, 0.5);}
    }
    .container{width:90%;max-width:900px;margin:auto;flex:1;padding-bottom:2em;}
    .content{
      background:rgba(255, 255, 255, 0.7);
      border-radius:var(--radius);
      padding:1.5em;
      margin:1.5em 0;
      backdrop-filter:blur(10px);
      border:1px solid rgba(255,255,255,0.7);
      box-shadow: 0 6px 16px var(--shadow);
      transition: transform .3s, box-shadow .3s;
    }
    .content:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px var(--shadow);
    }
    .content h2{
      color:var(--neon);
      margin-bottom:.5em;
      position: relative;
      display: inline-block;
    }
    .content h2::after {
      content: '';
      position: absolute;
      bottom: -8px;
      left: 0;
      width: 40px;
      height: 2px;
      background: var(--neon);
      transition: width 0.3s;
    }
    .content:hover h2::after {
      width: 100%;
    }
    .content ul{margin:.5em 0 1em 1.5em;}
    .content li{
      margin:.5em 0;
      line-height: 1.5;
    }
    .content pre{
      background:rgba(100, 80, 120, 0.06);
      padding:1.2em;
      border-radius:6px;
      overflow-x:auto;
      color: #483d8b;
      border-left: 3px solid var(--neon);
      margin: 1em 0;
      box-shadow: 0 3px 10px rgba(100, 80, 160, 0.1);
    }
    .content img{
      display:block;
      margin:1em auto;
      width:90%;
      max-width:800px;
      border-radius:var(--radius);
      box-shadow:0 6px 16px var(--shadow);
      transition: transform .3s, box-shadow .3s;
    }
    .content img:hover {
      transform: scale(1.02);
      box-shadow:0 10px 20px var(--shadow);
    }
    footer{
      text-align:center;
      padding:1.5em 0;
      background:rgba(255, 255, 255, 0.7);
      backdrop-filter:blur(10px);
      border-top:1px solid rgba(138, 43, 226, 0.2);
      font-size:.9em;
      color: #483d8b;
    }
  </style>
</head>
<body style="background-color:#e6e6fa !important; background-image: linear-gradient(to bottom right, #e6e6fa, #d8bfd8) !important;">

  <nav>
    <img src="images/logo.png" alt="Logo" class="logo">
    <a href="index.html">Home</a>
    <a href="system_diagram.html">System Diagram</a>
    <a href="srs.html">SRS</a>
    <a href="hrs.html">HRS</a>
  </nav>

  <section class="hero">
    <h1>Software Requirements</h1>
    <p>Team 20 "The Ohmies"</p>
  </section>

  <div class="container">

    <div class="content">
      <h2>SRS 01 – FreeRTOS Task Scheduling</h2>
      <p><strong>Status:</strong> Achieved</p>
      <ul>
        <li>Code review and task execution verification confirm proper implementation.</li>
        <li>System uses FreeRTOS for effective task management.</li>
      </ul>
      <pre>
// FreeRTOS task creation example
xTaskCreate(
    vEMGSamplingTask, 
    "EMG_Sampling",
    configMINIMAL_STACK_SIZE, 
    NULL, 
    tskIDLE_PRIORITY + 3, 
    NULL);
      </pre>
    </div>

    <div class="content">
      <h2>SRS 02 – EMG Sampling (1000Hz)</h2>
      <p><strong>Status:</strong> Achieved</p>
      <ul>
        <li>EMG sampling task runs at highest priority with 1000Hz sampling rate.</li>
        <li>Verified using timing pins and oscilloscope measurements.</li>
      </ul>
      <pre>
// EMG sampling at 1000Hz
void vEMGSamplingTask(void *pvParameters) {
    const TickType_t xFrequency = 1; // 1ms = 1000Hz
    for(;;) {
        emg_value = read_emg_sensor();
        process_emg_data(emg_value);
        vTaskDelay(xFrequency);
    }
}
      </pre>
    </div>

    <div class="content">
      <h2>SRS 03 – IMU Data Collection (100Hz)</h2>
      <p><strong>Status:</strong> Achieved</p>
      <ul>
        <li>IMU data collection runs at 100Hz with medium priority.</li>
        <li>Verified data collection rate through timing analysis.</li>
      </ul>
      <pre>
// IMU data collection at 100Hz
void vIMUDataCollectionTask(void *pvParameters) {
    const TickType_t xFrequency = 10; // 10ms = 100Hz
    for(;;) {
        read_imu_data(&imu_data);
        process_motion_data(&imu_data);
        vTaskDelay(xFrequency);
    }
}
      </pre>
    </div>

    <div class="content">
      <h2>SRS 04 – Motor Control Task (50Hz)</h2>
      <p><strong>Status:</strong> Achieved</p>
      <ul>
        <li>Motor control task processes EMG data and updates servo positions at 50Hz.</li>
        <li>Measured motor update frequency with timing analysis.</li>
      </ul>
      <pre>
// Motor control at 50Hz
void vMotorControlTask(void *pvParameters) {
    const TickType_t xFrequency = 20; // 20ms = 50Hz
    for(;;) {
        update_motor_positions(processed_emg_data);
        vTaskDelay(xFrequency);
    }
}
      </pre>
    </div>

    <div class="content">
      <h2>SRS 05 – Wi-Fi Communication</h2>
      <p><strong>Status:</strong> Achieved</p>
      <ul>
        <li>Wi-Fi communication task transmits sensor data at least every 1 second.</li>
        <li>Monitored data transmission using timer on phone.</li>
      </ul>
      <pre>
// Wi-Fi communication task
void vWiFiCommunicationTask(void *pvParameters) {
    const TickType_t xFrequency = 1000; // 1000ms = 1Hz
    for(;;) {
        send_data_to_cloud(sensor_data);
        vTaskDelay(xFrequency);
    }
}
      </pre>
    </div>

    <div class="content">
      <h2>SRS 06 – Safety Monitoring</h2>
      <p><strong>Status:</strong> Achieved</p>
      <ul>
        <li>Interrupt-driven safety monitoring for motor control implemented.</li>
        <li>Tested system response to various fault conditions.</li>
      </ul>
      <pre>
// Interrupt handler for emergency stop
void emergency_stop_handler(void) {
    stop_all_motors();
    set_system_state(EMERGENCY_STOP);
    notify_user("EMERGENCY STOP ACTIVATED");
}
      </pre>
    </div>

    <div class="content">
      <h2>SRS 07 – Task Synchronization</h2>
      <p><strong>Status:</strong> Achieved</p>
      <ul>
        <li>Implemented FreeRTOS semaphores and mutexes to prevent data corruption.</li>
        <li>Verified through concurrent access testing and logging.</li>
      </ul>
      <pre>
// Data protection with mutex
if (xSemaphoreTake(xDataMutex, portMAX_DELAY) == pdTRUE) {
    // Access protected data
    update_shared_data(new_data);
    xSemaphoreGive(xDataMutex);
}
      </pre>
    </div>

    <div class="content">
      <h2>SRS 08 – Wi-Fi Motor Parameter Control</h2>
      <p><strong>Status:</strong> Achieved</p>
      <ul>
        <li>Users can modify motor parameters through Wi-Fi commands.</li>
        <li>Tested per-finger control commands on the web interface.</li>
      </ul>
      <pre>
// Process command from web interface
void process_web_command(WebCommand_t* cmd) {
    switch(cmd->type) {
        case FINGER_POSITION:
            set_finger_position(cmd->finger_id, cmd->position);
            break;
        case TORQUE_LIMIT:
            set_torque_limit(cmd->finger_id, cmd->torque);
            break;
    }
}
      </pre>
    </div>

    <div class="content">
      <h2>SRS 09 – Emergency Stop Function</h2>
      <p><strong>Status:</strong> Achieved</p>
      <ul>
        <li>Emergency stop function disables all motor operations when activated.</li>
        <li>Verified motor disabling in various operational states.</li>
      </ul>
      <pre>
// Emergency stop implementation
void disable_all_motors(void) {
    for (int i = 0; i < NUM_MOTORS; i++) {
        motors[i].enabled = false;
        set_motor_pwm(i, 0);
    }
    emergency_state = true;
}
      </pre>
    </div>

    <div class="content">
      <h2>SRS 10 – Command Response Time</h2>
      <p><strong>Status:</strong> Achieved</p>
      <ul>
        <li>System processes Wi-Fi commands within 100ms of receipt.</li>
        <li>Measured command response time on phone timer.</li>
      </ul>
      <pre>
// Command processing task
void vCommandProcessingTask(void *pvParameters) {
    for(;;) {
        if (xQueueReceive(xCommandQueue, &receivedCommand, portMAX_DELAY) == pdPASS) {
            // Process command immediately
            process_command(&receivedCommand);
            // Send acknowledgment
            send_ack(receivedCommand.id);
        }
    }
}
      </pre>
    </div>

    <div class="content">
      <h2>SRS 11 – Finger Angle Control</h2>
      <p><strong>Status:</strong> Achieved</p>
      <ul>
        <li>System supports individual finger angle control from 0° to 90° with 1° resolution.</li>
        <li>Tested angle precision using protractor.</li>
      </ul>
      <pre>
// Set finger position with 1-degree resolution
void set_finger_position(uint8_t finger_id, uint8_t angle) {
    // Constrain angle between 0-90 degrees
    if (angle > 90) angle = 90;
    
    // Convert angle to servo position
    uint16_t servo_pos = map(angle, 0, 90, SERVO_MIN, SERVO_MAX);
    servo_set_position(finger_id, servo_pos);
}
      </pre>
    </div>

    <div class="content">
      <h2>SRS 12 – Command Protocol</h2>
      <p><strong>Status:</strong> Achieved</p>
      <ul>
        <li>Implemented command protocol for emergency stop activation and parameter adjustments.</li>
        <li>Verified protocol functionality through test commands.</li>
      </ul>
      <pre>
// Command protocol structure
typedef struct {
    uint8_t cmd_type;    // Command type (ESTOP, FINGER_CTRL, etc.)
    uint8_t finger_id;   // 0-3 for specific finger, 255 for all
    uint8_t parameter;   // Position, torque, etc.
    uint8_t value;       // Parameter value
    uint16_t checksum;   // Validation checksum
} Command_t;
      </pre>
    </div>

  </div>

  <footer>
    &copy; 2025 Team 20 "The Ohmies."
  </footer>
</body>
</html>
